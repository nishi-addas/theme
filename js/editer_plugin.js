(function() {tinymce.create('tinymce.plugins.addSnippet', { init : function(ed, url) {var t = this;t.editor = ed;ed.addCommand('section',function() {ed.windowManager.open( {title: '区切りの挿入',body: [{type: 'listbox',name: 'hrType',label: 'ライン','values': [{text: 'なし', value: ''},{text: 'あり', value: ' class="line"'}]}],onsubmit: function( e ) {ed.insertContent('<hr' + e.data.hrType + ' />');}});});ed.addButton( 'section', {title : '区切り',cmd : 'section',image : url + '/img/section.png'});ed.addCommand('lHeading',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'テキスト大見出し';ed.insertContent('<h1 class="lHeading">'+txt+'</h1>');});ed.addButton('lHeading', {title : 'テキスト大見出し',cmd : 'lHeading',image : url + '/img/lhead.png'});ed.addCommand('mHeading',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '中見出し';ed.insertContent('<h2 class="mHeading">'+txt+'</h2>');});ed.addButton('mHeading', {title : '中見出し',cmd : 'mHeading',image : url + '/img/mhead.png'});ed.addCommand('sHeading',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '小見出し';ed.insertContent('<h3 class="sHeading">'+txt+'</h3>');});ed.addButton('sHeading', {title : '小見出し',cmd : 'sHeading',image : url + '/img/shead.png'});ed.addCommand('note',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '※補足の文章';ed.insertContent('<p class="note">'+txt+'</p>&nbsp;');});ed.addButton('note', {title : '補足の文章',cmd : 'note',image : url + '/img/note.png'});ed.addCommand('labels',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ラベル';ed.windowManager.open( {title: 'ラベルの挿入',body: [{type: 'listbox',name: 'labelColor',label: 'Color','values': [{text: 'default', value: 'default'},{text: 'primary', value: 'primary'},{text: 'success', value: 'success'},{text: 'info', value: 'info'},{text: 'warning', value: 'warning'},{text: 'danger', value: 'danger'}]}],onsubmit: function( e ) {ed.insertContent('<span class="label bgc-' + e.data.labelColor + '">' + txt + '</span>');}});});ed.addButton( 'labels', {title : 'ラベル',cmd : 'labels',image : url + '/img/labels.png'});ed.addCommand('quotation',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '引用・転載';ed.insertContent('<blockquote><p>'+txt+'</p><small>出典：○○○○○</small></blockquote>&nbsp;');});ed.addButton('quotation', {title : '引用・転載',cmd : 'quotation',image : url + '/img/quotation.png'});ed.addCommand('imgStyle',function() {ed.windowManager.open( {title: '画像スタイルの設定',body: [{type: 'listbox',name: 'imgStyle',label: 'Style','values': [{text: 'None', value: ''},{text: 'Rounded', value: 'imgRounded'},{text: 'Circle', value: 'imgCircle'},{text: 'Thumbnail', value: 'imgThumbnail'}]}],onsubmit: function( e ) {n = ed.selection.getNode();obj = ed.dom.getParent(n);ed.dom.removeClass(obj, 'imgRounded');ed.dom.removeClass(obj, 'imgCircle');ed.dom.removeClass(obj, 'imgThumbnail');ed.dom.addClass(obj, e.data.imgStyle);}});});ed.addButton( 'imgStyle', {title : '画像スタイル',cmd : 'imgStyle',image : url + '/img/imgstyle.png'});ed.addCommand('buttons',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ボタン';ed.windowManager.open( {title: 'ボタンの設定',body: [{type: 'textbox',name: 'buttonUrl',label: 'URL',value: 'http://'},{type: 'listbox',name: 'buttonType',label: 'Type','values': [{text: 'default', value: ''},{text: 'block', value: ' button-block'},{text: 'group', value: ' button-group'},{text: 'justified', value: ' button-group button-justified'},{text: 'vertical', value: ' button-vertical'}]},{type: 'listbox',name: 'buttonSize',label: 'Size','values': [{text: 'large', value: 'lSize'},{text: 'middle', value: 'mSize'},{text: 'small', value: 'sSize'}]},{type: 'listbox',name: 'buttonColor',label: 'Color','values': [{text: 'default', value: 'default'},{text: 'primary', value: 'primary'},{text: 'success', value: 'success'},{text: 'info', value: 'info'},{text: 'warning', value: 'warning'},{text: 'danger', value: 'danger'}]}],onsubmit: function( e ) {ed.insertContent('<ul class="buttons' + e.data.buttonType + '"><li class="' + e.data.buttonSize + ' bgc-' + e.data.buttonColor + '"><a href="' + e.data.buttonUrl + '"><i class="fa fa-chevron-circle-right"></i> ' + txt + '</a></li></ul>&nbsp;');}});});ed.addButton( 'buttons', {title : 'ボタン',cmd : 'buttons',image : url + '/img/buttons.png'});ed.addCommand('navis',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ナビ';ed.windowManager.open( {title: 'ナビの設定',body: [{type: 'listbox',name: 'naviType',label: 'Type','values': [{text: 'Tab', value: 'navTab'},{text: 'Pill', value: 'navPill'},{text: 'Line', value: 'navLine'},{text: 'Group', value: 'navGroup'}]},{type: 'listbox',name: 'naviWidth',label: 'Width','values': [{text: 'Default', value: ''},{text: 'Max', value: ' navi-justified'}]}],onsubmit: function( e ) {ed.insertContent('<ul class="' + e.data.naviType + '' + e.data.naviWidth + '"><li><a href="#">A</a></li><li><a href="#">B</a></li><li><a href="#">C</a></li></ul>&nbsp;');}});});ed.addButton( 'navis', {title : 'ナビ',cmd : 'navis',image : url + '/img/navis.png'});ed.addCommand('breadcrumbs',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ぱんくず';ed.insertContent('<ul class="breadcrumbs"><li><a href="/">Home</a></li><li class="active">'+txt+'</li></ul>&nbsp;');});ed.addButton('breadcrumbs', {title : 'ぱんくず',cmd : 'breadcrumbs',image : url + '/img/breadcrumbs.png'});ed.addCommand('paginations',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ページネーション';ed.insertContent('<ul class="paginations"><li><a href="#">«</a></li><li class="active"><a href="#">1</a></li><li><a href="#">2</a></li><li><a href="#">3</a></li><li><a href="#">4</a></li><li><a href="#">5</a></li><li><a href="#">»</a></li></ul>&nbsp;');});ed.addButton('paginations', {title : 'ページネーション',cmd : 'paginations',image : url + '/img/paginations.png'});ed.addCommand('pagers',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'ページ送り';ed.insertContent('<ul class="pagers"><li class="previous"><a href="#"><i class="fa fa-angle-left"></i> Prev</a></li><li class="next"><a href="#">Next <i class="fa fa-angle-right"></i></a></li><li><a href="#"><i class="fa fa-angle-up"></i> Top</a></li></ul>&nbsp;');});ed.addButton('pagers', {title : 'ページ送り',cmd : 'pagers',image : url + '/img/pagers.png'});ed.addCommand('imgCenter',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像中央よせ';ed.insertContent('<div class="imgCenter"></div>'+txt);});ed.addButton('imgCenter', {title : '画像中央よせ',cmd : 'imgCenter',image : url + '/img/imgc.png'});ed.addCommand('imgLeft',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像左回り込み';ed.insertContent('<div class="imgLeft"></div>'+txt);});ed.addButton('imgLeft', {title : '画像左回り込み',cmd : 'imgLeft',image : url + '/img/imgl.png'});ed.addCommand('imgRight',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像右回り込み';ed.insertContent('<div class="imgRight"></div>'+txt);});ed.addButton('imgRight', {title : '画像右回り込み',cmd : 'imgRight',image : url + '/img/imgr.png'});ed.addCommand('imgLeftSet',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像左回り込みなし';ed.insertContent('<div class="imgLeftSet"><div class="image"></div><div class="paragraph">'+txt+'</div></div>&nbsp;');});ed.addButton('imgLeftSet', {title : '画像左回り込みなし',cmd : 'imgLeftSet',image : url + '/img/imglset.png'});ed.addCommand('imgRightSet',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像右回り込みなし';ed.insertContent('<div class="imgRightSet"><div class="image"></div><div class="paragraph">'+txt+'</div></div>&nbsp;');});ed.addButton('imgRightSet', {title : '画像右回り込みなし',cmd : 'imgRightSet',image : url + '/img/imgrset.png'});ed.addCommand('imgExplain',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = '画像+説明文';ed.insertContent('<div class="imgExplain"><div class="image"></div><div class="paragraph">'+txt+'</div></div>&nbsp;');});ed.addButton('imgExplain', {title : '画像+説明文',cmd : 'imgExplain',image : url + '/img/imgexp.png'});ed.addCommand('columns',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'カラム';ed.windowManager.open( {title: 'カラムの選択',body: [{type: 'listbox',name: 'columnType',label: 'Type','values': [{text: '2column', value: 'column2'},{text: '2column-line', value: 'column2-line'},{text: '2column-line(1:2)', value: 'column1_2-line'},{text: '2column-line(2:1)', value: 'column2_1-line'},{text: '3column', value: 'column3'},{text: '3column-line', value: 'column3-line'},{text: '4column', value: 'column4'},{text: '4column-line', value: 'column4-line'},]}],onsubmit: function( e ) {if(e.data.columnType == 'column2'){ed.insertContent('<div class="columns"><div class="column2"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column2-line'){ed.insertContent('<div class="columns"><div class="column2-line"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column1_2-line'){ed.insertContent('<div class="columns"><div class="column1_2-line"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div><p class="cap">キャプション</p></div></div><div class="col2"><div class="pack">'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column2_1-line'){ed.insertContent('<div class="columns"><div class="column2_1-line"><div class="cols"><div class="col2"><div class="pack">'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div><p class="cap">キャプション</p></div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column3'){ed.insertContent('<div class="columns"><div class="column3"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column3-line'){ed.insertContent('<div class="columns"><div class="column3-line"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column4'){ed.insertContent('<div class="columns"><div class="column4"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');} else if(e.data.columnType == 'column4-line'){ed.insertContent('<div class="columns"><div class="column4-line"><div class="cols"><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div><div class="col"><div class="pack"><div class="imgCenter"></div>'+txt+'</div></div></div></div></div>&nbsp;');}}});});ed.addButton( 'columns', {title : 'カラム',cmd : 'columns',image : url + '/img/columns.png'});ed.addCommand('panelBox',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'パネルボックス';ed.windowManager.open( {title: 'パネルボックスの設定',body: [{type: 'listbox',name: 'panelHeading',label: 'Heading','values': [{text: 'yes', value: 'yes'},{text: 'no', value: 'no'}]},{type: 'listbox',name: 'panelType',label: 'Type','values': [{text: 'default', value: 'default'},{text: 'primary', value: 'primary'},{text: 'success', value: 'success'},{text: 'info', value: 'info'},{text: 'warning', value: 'warning'},{text: 'danger', value: 'danger'}]}],onsubmit: function( e ) {if(e.data.panelHeading == 'yes'){ed.insertContent('<div class="panelBox bgc-' + e.data.panelType + '"><h3 class="boxHeading">タイトル</h3><div class="boxBody"><p>'+txt+'</p></div></div>&nbsp;');} else {ed.insertContent('<div class="panelBox bgc-' + e.data.panelType + '"><div class="boxBody"><p>'+txt+'</p></div></div>&nbsp;');}}});});ed.addButton( 'panelBox', {title : 'パネルボックス',cmd : 'panelBox',image : url + '/img/panelbox.png'});ed.addCommand('alertBox',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'アラートボックス';ed.windowManager.open( {title: 'アラートボックスの設定',body: [{type: 'listbox',name: 'panelType',label: 'Type','values': [{text: 'default', value: 'default'},{text: 'success', value: 'success'},{text: 'info', value: 'info'},{text: 'warning', value: 'warning'},{text: 'danger', value: 'danger'}]}],onsubmit: function( e ) {ed.insertContent('<div class="alertBox bgc-' + e.data.panelType + '"><div class="boxBody"><p>'+txt+'</p></div></div>&nbsp;');}});});ed.addButton( 'alertBox', {title : 'アラートボックス',cmd : 'alertBox',image : url + '/img/alertbox.png'});ed.addCommand('_listBox',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'リストボックス';ed.insertContent('<div class="listBox"><ul><li>'+txt+'</li></ul></div>&nbsp;');});ed.addButton( '_listBox', {title : 'リストボックス',cmd : '_listBox',image : url + '/img/listbox.png'});ed.addCommand('tableSample',function() {var txt;txt = ed.selection.getContent();if(!(txt))txt = 'テーブルサンプル';ed.windowManager.open( {title: 'テーブルサンプルの設定',body: [{type: 'listbox',name: 'tableStyle',label: 'Style','values': [{text: 'Style1', value: ' tableStyle1'},{text: 'Style2', value: ' tableStyle2'}]}],onsubmit: function( e ) {ed.insertContent('<div class="tableBox"><table class="tables' + e.data.tableStyle + '"><thead><tr><th>項目</th><th>項目</th><th>項目</th></tr></thead><tbody><tr><th>項目</th><td>テキスト</td><td>テキスト</td></tr></tbody></table></div>&nbsp;');}});});ed.addButton( 'tableSample', {title : 'テーブルサンプル',cmd : 'tableSample',image : url + '/img/tablesample.png'});var cols, rows;rows = ed.settings.textcolor_rows || 2;cols = ed.settings.textcolor_cols || 3;function getCurrentColor(format) {var color;ed.dom.getParents(ed.selection.getStart(), function(elm) {var value;if ((value = elm.style[format == 'forecolor' ? 'color' : 'background-color'])) {color = value;}});return color;}function mapColors() {var i, colors = [], colorMap;colorMap = ed.settings.textcolor_map || ["428bca", "font-primary", "3c763d", "font-success", "31708f", "font-info", "8a6d3b", "font-warning", "a94442", "font-danger"];for (i = 0; i < colorMap.length; i += 2) {colors.push({text: colorMap[i + 1],color: '#' + colorMap[i]});}return colors;}function mapColors2() {var i, colors = [], colorMap;colorMap = ed.settings.textcolor_map || ["f5f5f5", "bgc-default", "dff0d8", "bgc-success", "d9edf7", "bgc-info", "fcf8e3", "bgc-warning", "f2dede", "bgc-danger"];for (i = 0; i < colorMap.length; i += 2) {colors.push({text: colorMap[i + 1],color: '#' + colorMap[i]});}return colors;}function mapColors3() {var i, colors = [], colorMap;colorMap = ed.settings.textcolor_map || ["f5f5f5", "bgc-default", "428bca", "bgc-primary", "5cb85c", "bgc-success", "5bc0de", "bgc-info", "f0ad4e", "bgc-warning", "d9534f", "bgc-danger", ];for (i = 0; i < colorMap.length; i += 2) {colors.push({text: colorMap[i + 1],color: '#' + colorMap[i]});}return colors;}function renderColorPicker() {var ctrl = this, colors, color, html, last, x, y, i, id = ctrl._id, count = 0;function getColorCellHtml(color, title) {var isNoColor = color == 'transparent';return ('<td class="mce-grid-cell' + (isNoColor ? ' mce-colorbtn-trans' : '') + '">' +'<div id="' + id + '-' + (count++) + '"' +' data-mce-color="' + (color ? color : '') + '"' +' role="option"' +' tabIndex="-1"' +' style="' + (color ? 'background-color: ' + color : '') + '"' +' title="' + tinymce.translate(title) + '">' +(isNoColor ? '&#215;' : '') +'</div>' +'</td>');}if(ctrl.parent().settings.format == 'forecolor'){colors = mapColors();} else　if(ctrl.parent().settings.format == 'hilitecolor'){colors = mapColors2();} else {colors = mapColors3();}colors.push({text: tinymce.translate("No color"),color: "transparent"});html = '<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';last = colors.length - 1;for (y = 0; y < rows; y++) {html += '<tr>';for (x = 0; x < cols; x++) {i = y * cols + x;if (i > last) {html += '<td></td>';} else {color = colors[i];html += getColorCellHtml(color.color, color.text);}}html += '</tr>';}html += '</tbody></table>';return html;}function applyFormat(buttonCtrl, format, value) {var colors, color ,title ,obj;if(format == 'forecolor'){colors = mapColors();} else　if(format == 'hilitecolor'){colors = mapColors2();} else {colors = mapColors3();}if(format == 'bgcolor'){n = ed.selection.getNode();ab = ed.dom.getParent(n, '.alertBox');pb = ed.dom.getParent(n, '.panelBox');btn = ed.dom.getParent(n, '.buttons');if(ab){obj = ab;} else if(pb){obj = pb;} else if(btn){obj = ed.dom.getParent(n, 'li');} else{obj = ed.dom.getParent(n);}for (i = 0; i < colors.length; i++) {ed.dom.removeClass(obj, colors[i].text);if(value == colors[i].color) {ed.dom.addClass(obj, colors[i].text);}}} else {var txt = ed.selection.getContent();for (i = 0; i < colors.length; i++) {if(value == colors[i].color) {title = colors[i].text;}}ed.focus();ed.insertContent('<span class="' + title + '">'+txt+'</span>');}}function removeFormat() {ed.focus();ed.formatter.remove('removeformat', null,ed.dom.getParent(ed.selection.getNode()));ed.nodeChanged();}function onPanelClick(e) {var buttonCtrl = this.parent(), value;function selectColor(value) {buttonCtrl.hidePanel();buttonCtrl.color(value);applyFormat(buttonCtrl, buttonCtrl.settings.format, value);}function setDivColor(div, value) {div.style.background = value;div.setAttribute('data-mce-color', value);}if (tinymce.DOM.getParent(e.target, '.mce-custom-color-btn')) {buttonCtrl.hidePanel();ed.settings.color_picker_callback.call(ed, function(value) {var tableElm = buttonCtrl.panel.getEl().getElementsByTagName('table')[0];var customColorCells, div, i;customColorCells = tinymce.map(tableElm.rows[tableElm.rows.length - 1].childNodes, function(elm) {return elm.firstChild;});for (i = 0; i < customColorCells.length; i++) {div = customColorCells[i];if (!div.getAttribute('data-mce-color')) {break;}}if (i == cols) {for (i = 0; i < cols - 1; i++) {setDivColor(customColorCells[i], customColorCells[i + 1].getAttribute('data-mce-color'));}}setDivColor(div, value);selectColor(value);}, getCurrentColor(buttonCtrl.settings.format));}value = e.target.getAttribute('data-mce-color');if (value) {if (this.lastId) {document.getElementById(this.lastId).setAttribute('aria-selected', false);}e.target.setAttribute('aria-selected', true);this.lastId = e.target.id;if (value == 'transparent') {removeFormat(buttonCtrl.settings.format);buttonCtrl.hidePanel();return;}selectColor(value);} else if (value !== null) {buttonCtrl.hidePanel();}}function onButtonClick() {var self = this;if (self._color) {applyFormat(self, self.settings.format, self._color);}}ed.addButton('nforecolor', {type: 'colorbutton',tooltip: 'Text color',format: 'forecolor',panel: {role: 'application',ariaRemember: true,html: renderColorPicker,onclick: onPanelClick},onclick: onButtonClick,image : url + '/img/forecolor.png'});ed.addButton('nbackcolor', {type: 'colorbutton',tooltip: 'Background color',format: 'hilitecolor',panel: {role: 'application',ariaRemember: true,html: renderColorPicker,onclick: onPanelClick},onclick: onButtonClick,image : url + '/img/backcolor.png'});ed.addButton('bgcolor', {type: 'colorbutton',title : '背景色の変更',format: 'bgcolor',panel: {role: 'application',ariaRemember: true,html: renderColorPicker,onclick: onPanelClick},onclick: onButtonClick,image : url + '/img/bgcolor.png'});},getInfo : function() {return {longname : 'Code snippet for WordPress',author : 'neold,inc.',authorurl : 'http://www.neold.jp/',infourl : 'http://www.neold.jp/',version : "1.1"};}});tinymce.PluginManager.add('ncs', tinymce.plugins.addSnippet);})();